manifest {
  author = "Preecha Patumcharoenpol".split(" ")[1]
  nextflowVersion = ">=22.04.0"
  version = '0.1.0'
}

params {
  input = "input.csv"
  single_end = false
  help = false
  dada {
	pool = "pseudo"
	chimera_alg = "consensus"
	chimera_fol = 2.0
  }
  enable_conda = false

// For BLAST
//  blastrefseq = "s3://qiime2-data/2021.8/common/"
//  blastreftax = "s3://qiime2-data/2021.8/common/"
// For NBclassiffier
  modeltax = "s3://qiime2-data/2021.8/common/silva-138-99-nb-classifier.qza"
  //modeltax = "s3://qiime2-data/2021.8/common/gg-13-8-99-nb-classifier.qza"
// For tree classifier
  sepp_tree = "s3://qiime2-data/2021.8/common/sepp-refs-silva-128.qza"
}

// Defaults
docker.enabled         = false
singularity.enabled    = false
podman.enabled         = false
shifter.enabled        = false

profiles {

  local {
    process.executor = 'local'
  }

  sysbiome { includeConfig 'conf/sysbiome.config' }

  conda {
    conda.cacheDir = "$HOME/.sysmiome/minflow/cache/conda"
    params.enable_conda = true
    useMamba = true
    process.conda = "${projectDir}/envs/minflow.yaml"
	process {
	  withLabel: qiime2 {
	    conda = "${projectDir}/envs/qiime2-2021.8-py38-linux-conda.yml"
	  }
	}
  }

  singularity {
	singularity.enabled = true
	singularity.cacheDir = "$HOME/.sysmiome/minflow/cache/singularity"
	singularity.autoMounts = true
	process {
	  withLabel: qiime2 {
	    container = "quay.io/qiime2/core:2021.8"
	  }
	}
  }
  test               { includeConfig 'conf/test.config'               }
}

// vi: ft=groovy
